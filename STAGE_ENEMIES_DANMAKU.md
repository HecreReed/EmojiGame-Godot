# 道中小怪东方Project风格弹幕系统

## 概述
为所有道中小怪添加了东方Project风格的花哨弹幕模式，让关卡更有挑战性和观赏性！

## 基础敌人弹幕升级

### 低级敌人 (BASE_1, BASE_2, BASE_3)
- **普通弹** (40%) - 直线射击
- **追踪弹** (30%) - 朝向玩家
- **随机弹** (30%) - 随机方向

### 中级敌人 (BASE_4, BASE_5)
- **普通弹** (20%)
- **追踪弹** (20%)
- **随机弹** (20%)
- **散射弹** (20%)
- **螺旋弹** (20%) - 持续旋转的弹幕

### 高级敌人 (BASE_6, BASE_7)
- **追踪弹** (15%)
- **随机弹** (15%)
- **散射弹** (15%)
- **环形弹** (15%)
- **螺旋弹** (15%) - 3方向螺旋
- **蝴蝶弹** (15%) - 正弦波曲线运动
- **波浪弹** (10%) - 正弦/余弦波运动

## 特殊敌人类型

### FAST (快速敌人)
**主题**: 激光突袭
- 发射3个高速激光弹
- 速度: 20.0
- 子弹类型: LASER
- 贴图: bossbullut-5.png

### TANK (坦克敌人)
**主题**: 重型扇形弹幕
- 5方向扇形弹幕 (-30° 到 +30°)
- 速度: 6.0
- 子弹类型: NORMAL
- 贴图: bossbullut-6.png

### SHIELD (护盾敌人)
**主题**: 旋转防御弹幕
- 4方向旋转弹幕 (90°间隔)
- 持续旋转，形成防御圈
- 速度: 8.0
- 子弹类型: SPIRAL
- 贴图: bossbullut-10.png

### SPLIT (分裂敌人)
**主题**: 分裂弹幕
- 父敌人: 发射3个分裂弹
- 子敌人: 发射普通弹
- 分裂弹会在1秒后分裂成3个子弹
- 速度: 12.0
- 子弹类型: SPLIT
- 贴图: bossbullut-6.png

### SNIPER (狙击手)
**主题**: 精准激光+追踪组合
- 第一波: 3个精准激光弹
  - 速度: 18.0
  - 类型: LASER
  - 贴图: bossbullut-5.png
- 第二波: 1个强力追踪弹 (0.2秒后)
  - 速度: 10.0
  - 类型: HOMING
  - 追踪强度: 3.0
  - 贴图: bossbullut-11.png

### ELITE (精英敌人)
**主题**: 多重弹幕组合，随机选择3种模式

#### 模式1: 扇形螺旋弹 (33%)
- 5方向扇形 (-30° 到 +30°)
- 每个方向发射螺旋弹
- 速度: 9.0
- 类型: SPIRAL
- 贴图: bossbullut-3.png

#### 模式2: 环形分裂弹 (33%)
- 8方向环形 (45°间隔)
- 每个方向发射分裂弹
- 速度: 10.0
- 类型: SPLIT
- 贴图: bossbullut-6.png

#### 模式3: 追踪弹+波浪弹组合 (34%)
- 第一波: 3个追踪弹
  - 速度: 11.0
  - 类型: HOMING
  - 追踪强度: 2.0
  - 贴图: bossbullut-11.png
- 第二波: 2个波浪弹 (0.15秒后)
  - 速度: 9.0
  - 类型: WAVE_SINE / WAVE_COS
  - 贴图: bossbullut-10.png

### MINIBOSS (中Boss)
**主题**: 东方风格中boss，每5秒切换弹幕模式

#### 模式0: 旋转环形弹幕
- 12方向环形 (30°间隔)
- 持续旋转 (100°/秒)
- 速度: 7.0
- 类型: CIRCLE
- 贴图: bossbullut-10.png

#### 模式1: 追踪弹雨
- 5个追踪弹，扇形散开
- 速度: 10.0
- 类型: HOMING
- 追踪强度: 2.5
- 贴图: bossbullut-11.png

#### 模式2: 螺旋弹幕
- 8方向螺旋 (45°间隔)
- 持续旋转方向
- 速度: 9.0
- 类型: SPIRAL
- 贴图: bossbullut-3.png

#### 模式3: 分裂弹环
- 6方向环形 (60°间隔)
- 每个弹会分裂成3个
- 速度: 11.0
- 类型: SPLIT
- 贴图: bossbullut-6.png

#### 模式4: 波浪墙+激光组合
- 第一波: 5个波浪弹
  - 速度: 9.0
  - 类型: WAVE_SINE / WAVE_COS
  - 贴图: bossbullut-10.png
- 第二波: 2个激光 (0.2秒后)
  - 速度: 20.0
  - 类型: LASER
  - 贴图: bossbullut-5.png

## 新增弹幕函数

### 小型弹幕模式
1. `_shoot_spiral_mini()` - 3方向螺旋弹
2. `_shoot_butterfly_mini()` - 2个蝴蝶弹
3. `_shoot_wave_mini()` - 3个波浪弹
4. `_shoot_accelerate()` - 加速弹
5. `_shoot_homing()` - 持续追踪弹
6. `_shoot_bounce()` - 3个弹跳弹

### 特殊敌人弹幕
1. `_shoot_fast()` - 快速激光
2. `_shoot_tank()` - 重型扇形
3. `_shoot_shield()` - 旋转防御
4. `_shoot_split()` - 分裂弹幕

## 特殊子弹类型使用

### BUTTERFLY (蝴蝶弹)
- 正弦波曲线运动
- 适合: 高级敌人、ELITE

### LASER (激光)
- 超高速直线
- 适合: FAST、SNIPER、MINIBOSS

### SPIRAL (螺旋弹)
- 持续旋转方向
- 适合: 中高级敌人、SHIELD、ELITE、MINIBOSS

### SPLIT (分裂弹)
- 1秒后分裂成3个子弹
- 适合: SPLIT、ELITE、MINIBOSS

### HOMING (追踪弹)
- 持续追踪玩家
- 适合: SNIPER、ELITE、MINIBOSS

### WAVE_SINE / WAVE_COS (波浪弹)
- 正弦/余弦波运动
- 适合: 高级敌人、ELITE、MINIBOSS

### BOUNCE (弹跳弹)
- 碰墙反弹
- 适合: 特殊场景

### ACCELERATE (加速弹)
- 持续加速
- 适合: 突袭型敌人

## 弹幕难度分级

### 简单 (BASE_1-3)
- 基础直线、追踪、随机弹
- 速度: 6-10
- 弹幕密度: 低

### 中等 (BASE_4-5, FAST, TANK, SHIELD)
- 加入螺旋、扇形弹幕
- 速度: 6-12
- 弹幕密度: 中

### 困难 (BASE_6-7, SPLIT, SNIPER)
- 蝴蝶弹、波浪弹、分裂弹
- 速度: 8-18
- 弹幕密度: 高

### 极难 (ELITE, MINIBOSS)
- 多重组合弹幕
- 追踪+激光+分裂组合
- 速度: 9-20
- 弹幕密度: 极高
- 模式切换

## 视觉效果

不同子弹类型使用不同贴图：
- **普通弹**: bossbullut-1.png
- **螺旋弹**: bossbullut-3.png
- **激光**: bossbullut-5.png
- **重型弹**: bossbullut-6.png
- **波浪弹**: bossbullut-10.png
- **追踪弹**: bossbullut-11.png

## 平衡性建议

如果觉得道中太难或太简单，可以调整：

### 降低难度
- 减少高级敌人的出现频率
- 降低子弹速度 (speed参数)
- 减少子弹数量
- 降低追踪强度 (_homing_strength)

### 提高难度
- 增加ELITE和MINIBOSS的出现频率
- 提高子弹速度
- 增加子弹数量
- 提高追踪强度
- 缩短MINIBOSS的模式切换时间

## 与Boss弹幕的区别

### 道中小怪
- 弹幕规模较小
- 单次发射子弹数量少 (1-12个)
- 模式简单直接
- 快速击杀

### Boss
- 弹幕规模大
- 单次发射子弹数量多 (12-35个)
- 复杂组合模式
- 持久战

## 东方Project风格特点

✅ **多样化弹幕**: 10+种不同的弹幕模式
✅ **视觉华丽**: 螺旋、波浪、蝴蝶等曲线运动
✅ **难度递进**: 从简单到极难的平滑过渡
✅ **模式切换**: MINIBOSS每5秒切换弹幕模式
✅ **组合攻击**: ELITE和SNIPER使用多重弹幕组合
✅ **特殊机制**: 分裂弹、追踪弹、弹跳弹等

现在你的道中小怪也像东方Project一样华丽了！🎮✨
