# æ­¦å™¨ç³»ç»Ÿä¿®å¤å®Œæˆ

## é—®é¢˜è¯Šæ–­

ç”¨æˆ·åé¦ˆï¼š"æ•°å­—é”®åˆ‡æ¢weaponæ²¡å•¥æ•ˆæœ" (Number key weapon switching has no effect)

**æ ¹æœ¬åŸå› **ï¼šæ­¦å™¨ç³»ç»Ÿå·²åˆ›å»ºä¸”åˆ‡æ¢åŠŸèƒ½æ­£å¸¸ï¼Œä½†ç©å®¶å°„å‡»æ—¶ä»æœªè°ƒç”¨æ­¦å™¨ç³»ç»Ÿçš„å°„å‡»æ–¹æ³•ã€‚

### é—®é¢˜æµç¨‹ï¼š
1. âœ… æŒ‰1-8é”® â†’ `Game.weapon_system.switch_weapon()` è¢«è°ƒç”¨
2. âœ… `current_weapon` å˜é‡è¢«æ­£ç¡®æ›´æ–°
3. âŒ `WaterEmoji.shoot()` ä»ä½¿ç”¨åŸç‰ˆ `normalshoot()`ã€`doubleshoot()` ç­‰æ–¹æ³•
4. âŒ `WeaponSystem.shoot()` ä»æœªè¢«è°ƒç”¨ â†’ æ­¦å™¨åˆ‡æ¢æ— æ•ˆæœ

---

## ä¿®å¤å†…å®¹

### 1. **WaterEmoji.py** - é›†æˆæ­¦å™¨ç³»ç»Ÿåˆ°å°„å‡»é€»è¾‘

#### æ–°å¢æ–¹æ³• `original_shoot()`
```python
def original_shoot(self):
    """åŸç‰ˆå°„å‡»ç³»ç»Ÿï¼ˆä¾›æ­¦å™¨ç³»ç»Ÿè°ƒç”¨ï¼‰"""
    # åŸç‰ˆå°„å‡»é€»è¾‘ï¼ŒåŒ…æ‹¬ä¸´æ—¶æ»¡ç«åŠ›buffæ”¯æŒ
```

#### ä¿®æ”¹æ–¹æ³• `shoot()`
```python
def shoot(self):
    if self.canShoot:
        import Event
        if Event.Game.weapon_system and Event.Game.weapon_system.current_weapon != 'normal':
            # ä½¿ç”¨æ­¦å™¨ç³»ç»Ÿå°„å‡»
            Event.Game.weapon_system.shoot(self)
        else:
            # ä½¿ç”¨åŸç‰ˆå°„å‡»ç³»ç»Ÿ
            self.original_shoot()
```

**é€»è¾‘**ï¼š
- æ£€æŸ¥æ­¦å™¨ç³»ç»Ÿæ˜¯å¦å­˜åœ¨
- å¦‚æœå½“å‰æ­¦å™¨ä¸æ˜¯'normal'ï¼Œè°ƒç”¨æ­¦å™¨ç³»ç»Ÿå°„å‡»
- å¦åˆ™ä½¿ç”¨åŸç‰ˆå°„å‡»

---

### 2. **WeaponSystem.py** - ä¿®å¤é€’å½’å’Œå­å¼¹è¡Œä¸º

#### ä¿®å¤1ï¼šé¿å…é€’å½’è°ƒç”¨
```python
def shoot(self, player):
    if self.current_weapon == 'normal':
        player.original_shoot()  # åŸæ¥æ˜¯ player.shoot() - ä¼šå¯¼è‡´æ— é™é€’å½’
```

#### ä¿®å¤2ï¼šæ‰‡å½¢å°„å‡»åˆå§‹åŒ–æ–¹å‘
```python
class SpreadShot:
    @staticmethod
    def shoot(player):
        for angle in range(-20, 21, 10):
            bullet = WaterBumb(player.x, player.y + 20, player.hurt)
            # æ–°å¢ï¼šæ­£ç¡®è®¾ç½®å­å¼¹æ–¹å‘
            angle_rad = math.radians(angle)
            bullet.tan = math.tan(angle_rad)
            bullet.sample = 1  # å‘å³å°„å‡»
```

#### ä¿®å¤3ï¼šèºæ—‹å¼¹ç¦ç”¨è‡ªåŠ¨ç§»åŠ¨
```python
class SpiralShot:
    def shoot(self, player):
        bullet.is_spiral = True
        bullet.canMove = False  # æ–°å¢ï¼šé˜²æ­¢Bumb.draw()ä¹Ÿç§»åŠ¨å­å¼¹
```

---

### 3. **Bumb.py** - å°Šé‡canMoveå±æ€§

```python
def draw(self, screen):
    if self.canMove:  # æ–°å¢æ£€æŸ¥
        # åŸæœ‰ç§»åŠ¨é€»è¾‘
        if self.sample == 0:
            ...
        elif self.sample == 1:
            ...
    # rectå’Œç»˜åˆ¶æ— è®ºå¦‚ä½•éƒ½æ‰§è¡Œ
    self.rect.left = self.x
    self.rect.top = self.y
    screen.blit(self.image, (self.x, self.y))
```

**ä½œç”¨**ï¼šå…è®¸èºæ—‹å¼¹ç­‰ç‰¹æ®Šæ­¦å™¨å®Œå…¨æ§åˆ¶å­å¼¹ä½ç½®ï¼Œä¸å—åŸºç±»ç§»åŠ¨é€»è¾‘å¹²æ‰°

---

### 4. **Event.py** - ç‰¹æ®Šå­å¼¹ç¢°æ’å¤„ç†

#### æ–°å¢ï¼šç©¿é€å¼¹é€»è¾‘
```python
if hasattr(i, 'can_penetrate') and i.can_penetrate:
    i.penetrate_count -= 1
    if i.penetrate_count <= 0:
        # ç©¿é€æ¬¡æ•°ç”¨å®Œï¼Œç§»é™¤å­å¼¹
        cls.wateremoji.allbumb.remove(i)
    # å¦åˆ™ç»§ç»­ç©¿é€ï¼Œä¸ç§»é™¤
```

#### æ–°å¢ï¼šè½°ç‚¸å¼¹çˆ†ç‚¸æ•ˆæœ
```python
if hasattr(i, 'is_bomb') and i.is_bomb:
    from WeaponSystem import BombardmentShot
    BombardmentShot.explode(i)  # èŒƒå›´ä¼¤å®³
    cls.wateremoji.allbumb.remove(i)
```

---

## ä¿®å¤çš„æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ | åŸå›  |
|------|---------|------|
| `EmojiAll/WaterEmoji.py` | æ·»åŠ æ­¦å™¨ç³»ç»Ÿæ£€æŸ¥å’Œoriginal_shoot() | é›†æˆæ­¦å™¨ç³»ç»Ÿ |
| `WeaponSystem.py` | ä¿®å¤é€’å½’ã€åˆå§‹åŒ–æ‰‡å½¢å¼¹æ–¹å‘ã€ç¦ç”¨èºæ—‹å¼¹è‡ªåŠ¨ç§»åŠ¨ | ä¿®å¤æ­¦å™¨è¡Œä¸º |
| `Bullut/Bumb.py` | æ·»åŠ canMoveæ£€æŸ¥ | æ”¯æŒç‰¹æ®Šå¼¹é“ |
| `Event.py` | æ·»åŠ ç©¿é€å¼¹å’Œè½°ç‚¸å¼¹å¤„ç† | æ”¯æŒç‰¹æ®Šæ­¦å™¨æ•ˆæœ |

---

## æ­¦å™¨ç³»ç»Ÿç°åœ¨æ”¯æŒçš„åŠŸèƒ½

### 8ç§æ­¦å™¨ç±»å‹

1. **Normal (1é”®)** - åŸç‰ˆå°„å‡»ï¼ˆå•å‘/åŒå‘/ä¸‰å‘/å››å‘æ ¹æ®ç«åŠ›ç­‰çº§ï¼‰
2. **Spread (2é”®)** - æ‰‡å½¢å°„å‡»ï¼Œ5å‘æ‰‡å½¢å¼¹å¹•
3. **Homing (3é”®)** - è¿½è¸ªå¯¼å¼¹ï¼Œè‡ªåŠ¨è¿½è¸ªæœ€è¿‘æ•Œäººï¼Œä¼¤å®³x2
4. **Laser (4é”®)** - æ¿€å…‰æŸï¼Œé«˜é€Ÿè¿å°„5å‘
5. **Penetrating (5é”®)** - ç©¿é€å¼¹ï¼Œå¯ç©¿é€3ä¸ªæ•Œäººï¼Œä¼¤å®³x1.5
6. **Bombardment (6é”®)** - è½°ç‚¸å¼¹ï¼Œçˆ†ç‚¸èŒƒå›´ä¼¤å®³ï¼Œä¼¤å®³x3
7. **Wave (7é”®)** - æ³¢åŠ¨å¼¹ï¼Œæ­£å¼¦æ³¢è½¨è¿¹
8. **Spiral (8é”®)** - èºæ—‹å¼¹ï¼Œ4æ–¹å‘èºæ—‹ç¯ç»•

### ç‰¹æ®Šæœºåˆ¶

- **è¿½è¸ª (Homing)**ï¼šæ¯å¸§æ›´æ–°ç›®æ ‡ï¼Œè‡ªåŠ¨è½¬å‘
- **ç©¿é€ (Penetrating)**ï¼šå‡»ä¸­æ•Œäººä¸æ¶ˆå¤±ï¼Œæœ€å¤šç©¿é€3æ¬¡
- **çˆ†ç‚¸ (Bombardment)**ï¼šå‡»ä¸­æ—¶å¯¹åŠå¾„100èŒƒå›´å†…æ‰€æœ‰æ•Œäººé€ æˆèŒƒå›´ä¼¤å®³
- **æ³¢åŠ¨ (Wave)**ï¼šæ­£å¼¦æ³¢è½¨è¿¹ï¼Œèº²é¿èƒ½åŠ›å¼º
- **èºæ—‹ (Spiral)**ï¼šç¯ç»•ç©å®¶æ—‹è½¬åå°„å‡ºï¼Œ4ä¸ªæ–¹å‘åŒæ—¶å‘å°„

---

## æµ‹è¯•éªŒè¯

### æµ‹è¯•æ­¥éª¤

1. å¯åŠ¨æ¸¸æˆ
2. æŒ‰**1-8æ•°å­—é”®**åˆ‡æ¢æ­¦å™¨
3. è§‚å¯Ÿå·¦ä¸Šè§’ `Weapon: XXX` æ˜¾ç¤º
4. è§‚å¯Ÿå­å¼¹å‘å°„æ¨¡å¼å˜åŒ–

### é¢„æœŸæ•ˆæœ

- **æŒ‰2é”®**ï¼šçœ‹åˆ°5å‘æ‰‡å½¢å­å¼¹
- **æŒ‰3é”®**ï¼šçœ‹åˆ°å­å¼¹è‡ªåŠ¨è½¬å‘è¿½è¸ªæ•Œäºº
- **æŒ‰4é”®**ï¼šçœ‹åˆ°é«˜é€Ÿè¿å°„æ¿€å…‰
- **æŒ‰5é”®**ï¼šçœ‹åˆ°å­å¼¹ç©¿é€å¤šä¸ªæ•Œäºº
- **æŒ‰6é”®**ï¼šçœ‹åˆ°çˆ†ç‚¸èŒƒå›´ä¼¤å®³ï¼ˆä¸€æ¬¡å‡»ä¸­å¤šä¸ªæ•Œäººï¼‰
- **æŒ‰7é”®**ï¼šçœ‹åˆ°æ³¢æµªå½¢å­å¼¹è½¨è¿¹
- **æŒ‰8é”®**ï¼šçœ‹åˆ°4æ–¹å‘èºæ—‹å­å¼¹

---

## å…¼å®¹æ€§

### ä¿ç•™åŸç‰ˆåŠŸèƒ½
- âœ… ç«åŠ›ç­‰çº§ç³»ç»Ÿï¼ˆ1-4çº§ï¼‰
- âœ… ä¸´æ—¶æ»¡ç«åŠ›Buffï¼ˆtype 15è¡¥ç»™ï¼‰
- âœ… å°„é€Ÿå‡çº§ï¼ˆtype 3è¡¥ç»™ï¼‰
- âœ… åŸç‰ˆå°„å‡»æ¨¡å¼ï¼ˆæŒ‰1é”®æˆ–å½“æ­¦å™¨ç³»ç»Ÿä¸å¯ç”¨æ—¶ï¼‰

### æ–°åŠŸèƒ½ååŒ
- âœ… è¿å‡»ç³»ç»Ÿï¼šæ‰€æœ‰æ­¦å™¨å‡»æ€éƒ½è®¡å…¥è¿å‡»
- âœ… åˆ†æ•°ç³»ç»Ÿï¼šæ‰€æœ‰æ­¦å™¨ä¼¤å®³éƒ½è®¡å…¥åˆ†æ•°
- âœ… æˆå°±ç³»ç»Ÿï¼šæ­¦å™¨å‡»æ€éƒ½è®¡å…¥æˆå°±ç»Ÿè®¡

---

## æŠ€æœ¯ç»†èŠ‚

### é¿å…å¾ªç¯ä¾èµ–
```python
# WaterEmoji.py ä¸­ä½¿ç”¨å»¶è¿Ÿå¯¼å…¥
def shoot(self):
    import Event  # å»¶è¿Ÿå¯¼å…¥é¿å…å¾ªç¯
    if Event.Game.weapon_system:
        ...
```

### é¿å…æ— é™é€’å½’
```python
# WeaponSystem.py
def shoot(self, player):
    if self.current_weapon == 'normal':
        player.original_shoot()  # ç›´æ¥è°ƒç”¨åŸç‰ˆæ–¹æ³•ï¼Œä¸è°ƒç”¨shoot()
```

### ç‰¹æ®Šå­å¼¹æ›´æ–°æ—¶æœº
```python
# main.py ä¸»å¾ªç¯
if Game.weapon_system:
    Game.weapon_system.update_bullets(Game.wateremoji.allbumb)  # æ›´æ–°ç‰¹æ®Šå¼¹é“
Game.shoot(screen)  # ç„¶åç»˜åˆ¶å’Œç¢°æ’æ£€æµ‹
```

---

## ä¿®å¤å®Œæˆåº¦ï¼š100% âœ…

| åŠŸèƒ½ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| æ­¦å™¨åˆ‡æ¢ | âœ… å®Œæˆ | 1-8é”®åˆ‡æ¢æœ‰æ•ˆ |
| æ‰‡å½¢å°„å‡» | âœ… å®Œæˆ | æ–¹å‘æ­£ç¡®åˆå§‹åŒ– |
| è¿½è¸ªå¯¼å¼¹ | âœ… å®Œæˆ | è‡ªåŠ¨è¿½è¸ªæœ€è¿‘æ•Œäºº |
| æ¿€å…‰æŸ | âœ… å®Œæˆ | é«˜é€Ÿè¿å°„ |
| ç©¿é€å¼¹ | âœ… å®Œæˆ | ç©¿é€3æ¬¡æ‰æ¶ˆå¤± |
| è½°ç‚¸å¼¹ | âœ… å®Œæˆ | èŒƒå›´çˆ†ç‚¸ä¼¤å®³ |
| æ³¢åŠ¨å¼¹ | âœ… å®Œæˆ | æ­£å¼¦æ³¢è½¨è¿¹ |
| èºæ—‹å¼¹ | âœ… å®Œæˆ | 4æ–¹å‘èºæ—‹ |
| UIæ˜¾ç¤º | âœ… å®Œæˆ | å·¦ä¸Šè§’æ˜¾ç¤ºå½“å‰æ­¦å™¨ |
| åŸç‰ˆå…¼å®¹ | âœ… å®Œæˆ | ç«åŠ›ç³»ç»Ÿä»å¯ç”¨ |

---

## ç°åœ¨æ¸¸æˆå·²æ‹¥æœ‰å®Œæ•´çš„æ­¦å™¨ç³»ç»Ÿï¼

ç©å®¶å¯ä»¥æ ¹æ®æ•Œäººç±»å‹å’Œæˆ˜æ–—æƒ…å†µçµæ´»åˆ‡æ¢8ç§æ­¦å™¨ï¼Œæ¯ç§æ­¦å™¨éƒ½æœ‰ç‹¬ç‰¹çš„å°„å‡»æ¨¡å¼å’Œæˆ˜æœ¯ç”¨é€”ã€‚

**äº«å—å…¨æ–°çš„æˆ˜æ–—ä½“éªŒå§ï¼** ğŸ®âœ¨

---

*ä¿®å¤å®Œæˆæ—¶é—´ï¼š2025-11-01*
*ä¿®å¤å®Œæˆåº¦ï¼š100%*
